<html>
    
    <head>
        
        <title></title>
        <meta charset="UTF-8">  
        
        <!-- <meta http-equiv="refresh" content=1;url="www.jmarysystems.com.br"> -->    
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">    
        
        <script type="text/javascript" src='js/0000_00_full.js'></script>
        
        <script type="text/javascript" src='js/0001_01_adicionar_produto.js'></script>
        
        <script type="text/javascript" src='js/0002_01_pesquisar_dados_dos_produtos_imagens_e_listar.js'></script>
        <script type="text/javascript" src='js/0002_02_adicionando_produto_ao_html.js'></script>
        
        <script type="text/javascript" src='../../../../arquivos/js/imprimir_div.js'></script>
        
        <script type="text/javascript" src='../../../../arquivos/js/jquery.js'></script>
        
        <script type="text/javascript" src='../../../../arquivos/js/leitor_de_codigo_de_barras/quagga.js'></script>
        <script type="text/javascript" src='../../../../arquivos/js/leitor_de_codigo_de_barras/quagga_min.js'></script>
       
        <style>         
        </style>
    </head>
    
    <body 
        style="background-color: #D3D3D3; width: 100%; height: 100%; padding: 0; margin: 0;
               font-family: Arial, Helvetica, sans-serif; font-size: 14px; color: black; line-height: 1.5;" > 


<!-- input(S) ################################################################# -->         
        <input type="hidden" id="usuario_logado_id_nome" value="null">
<!-- input(S) ################################################################# -->   

<!-- input(S) ################################################################# -->         
        <input type="hidden" id="usuario_logado_id" value="null">
<!-- input(S) ################################################################# --> 

<!-- input(S) ################################################################# --> 
        <audio id="audio_beep1" controls style="display: none; padding: 0; margin: 0;">             
            <source src="../../../../arquivos/sons/beep1.mp3" type="audio/mpeg">
        </audio>
<!-- input(S) ################################################################# --> 



<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0
-1
-2
- #### MENU INÍCIO #### --> 
<!-- 
-0
-1
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->   
<div id="topo_menu_xx" style="display: none; background-color: #3A3A3A; 
            width:            100%; 
            height:           50px; 
            padding:          0; 
            margin:           0;    
            z-index:200;
            position: relative;
            " >
    
<ul style="list-style:none; padding: 0px; margin: 0px; height: 100%; z-index:199;">
   
    
    
<!-- 
-0
-1
-2
 --> 
<!--- #### COLUNA 1 INÍCIO #### --> 
<!-- 
-0
-1
-2    
-->
    <li 
        style="
            height: 100%; float:    left;    position: relative; 
            width:  100%; overflow: visible;"
        
        onMouseover="
            this.style.backgroundColor='#23871C'; 
            this.style.color='#3A3A3A';  
            document.getElementById('coluna11tb').style.display = 'block'; "
            
        onMouseout="
            this.style.backgroundColor='#3A3A3A';                               
            document.getElementById('coluna11tb').style.display = 'none';  "
    >
        
        <a 
            id="cara_palida"
            style="
                float:           left;
                color:           #fff; font-family:  Arial, Helvetica, sans-serif; 
                font-size:       19px; padding-left: 10px; 
                padding-right:   10px; line-height:  50px; 
                text-decoration: none;"
           
            onMouseover=" this.style.color='black'; "
            onMouseout="  this.style.color='#fff'; "       
        > 
            -)-> CONTROLE DE VALIDADE <-(- </a>  
        
        
        
        
        
        
    </li>  
<!-- 
-0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
-1
-2
- #### COLUNA 1 FIM #### --> 
<!-- 
-0
-1
-2    
-->


</ul>
</div>






<div id="controle_camera" style="display: none; width:100%; padding: 0; margin: 0;">
    
    <img src="../../../../arquivos/imagens/003_login/cancelar.png" 
            style="cursor: pointer; float: left; width:100px; height:40px; "
            
            onclick="
                document.getElementById('controle_camera').style.display = 'none'; 
                document.getElementById('div_consultar_produto').style.display = 'block';
                document.getElementById('camera_titulo').style.display = 'block';
            "
                        
            title="Voltar" >
    
    <div id="camera_titulo" style="width:100%; padding: 0; margin: 0;">        
    </div>  
    
    <div id="camera" style="width:100%; padding: 0; margin: 0;">
    </div>    
    
</div>          
<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0
-1
-2
- #### LOGIN INÍCIO #### display: none; --> 
<!-- 
-0
-1             
-2    onClick="
                        
                    "
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--> 
<div id="div_consultar_produto" style="padding: 0; margin: 0;">
    
<ul style="list-style:none; padding: 0px; margin: 0px; width:100%;" >    
    
    <li style="padding: 0px; margin: 0px; width:100%; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
        <img src="../../../../arquivos/imagens/003_login/voltar.png" 
            style="cursor: pointer; float: left; width:100px; height:40px; "
            
            onclick="
                window.location.href = 
                    'controle_de_validade_0000_01_pagina_inicial.html'  + '?' + 
                    'usuario_logado_id_nome' + '=' + document.getElementById('usuario_logado_id_nome').value;"
                        
            title="Voltar" >
        
        <img id="btn" src="../../../../arquivos/imagens/003_login/app.png" 
            style="cursor: pointer; float: right"
            
            onclick="
                javascript:abrir_camera_para_ler_o_codigo_de_barras();
                
                document.getElementById('controle_camera').style.display = 'block'; 
                document.getElementById('div_consultar_produto').style.display = 'none'; 
            "
            
            title="Voltar" width="80" height="60px">    
    </li> 
                            
    <li align="center"  style="padding: 0px; margin: 0px; width:100%; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        <a style="color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%; text-decoration: none;"
            onMouseover=" this.style.color='#fff'; this.style.backgroundColor='#23871C'; "
            onMouseout="  this.style.color='black'; this.style.backgroundColor='#D3D3D3'; "       
        > 
            Digite o Ean
        </a>
    </li> 
    
    <li align="center"  style="padding: 0px; margin: 0px; width:100%; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
        <textarea id="ean_manual" name="ean_manual" rows="1" cols="50" style="background-color: #3A3A3A; width:90%; height: 80px; color:#fff; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">  </textarea>
    </li>
    
    <li align="center"  style="padding: 0px; margin: 0px;">
        <table border="0" cellpadding="0" cellspacing="3" style="padding: 0; margin: 0; ">
            <tr>
                
                <td style="">
                </td>
                
                <td style="width:15%;">
                    <ul style="list-style:none; padding: 0px; margin: 0px; " >
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; ">
                            <a style="color:black; font-family:  Arial, Helvetica, sans-serif; text-decoration: none;"
                               onMouseover=" this.style.color='#fff'; this.style.backgroundColor='#23871C'; "
                               onMouseout="  this.style.color='black'; this.style.backgroundColor='#D3D3D3'; "       
                            > 
                                Quantidade Unidade/Kg:
                            </a>
                        </li> 
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
                            <textarea onchange="funcaosomar();" id="qtd_ean" name="qtd_ean" rows="1" cols="50" style="background-color: #3A3A3A; width:100%; height: 60px; color:#fff; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">  </textarea>
                        </li>
                    </ul>
                </td>
                
                <td style="width:15%;">
                    <ul style="list-style:none; padding: 0px; margin: 0px; " >
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; ">
                            <a style="color:black; font-family:  Arial, Helvetica, sans-serif; text-decoration: none;"
                               onMouseover=" this.style.color='#fff'; this.style.backgroundColor='#23871C'; "
                               onMouseout="  this.style.color='black'; this.style.backgroundColor='#D3D3D3'; "       
                            > 
                                Data de vencimento
                            </a>
                        </li> 
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
                            <textarea id="data_ean" name="data_ean" rows="1" cols="50" style="background-color: #3A3A3A; width:100%; height: 60px; color:#fff; font-family:  Arial, Helvetica, sans-serif; font-size: 130%;">  </textarea>
                        </li>
                    </ul>
                </td>
                
                <td style="">
                </td>
                
            </tr>
        </table>
    </li> 
    
    <li align="center"  style="padding: 0px; margin: 0px;">
        <table border="0" cellpadding="0" cellspacing="3" style="padding: 0; margin: 0; ">
            <tr>
                
                <td style="">
                </td>
                
                <td style="width:15%;">
                    <ul style="list-style:none; padding: 0px; margin: 0px; " >
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; ">
                            <a style="color:black; font-family:  Arial, Helvetica, sans-serif; text-decoration: none;"
                               onMouseover=" this.style.color='#fff'; this.style.backgroundColor='#23871C'; "
                               onMouseout="  this.style.color='black'; this.style.backgroundColor='#D3D3D3'; "       
                            > 
                                Valor Unidade:
                            </a>
                        </li> 
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
                            <textarea onchange="funcaosomar();" id="valor_und_ean" name="qtd_ean" rows="1" cols="50" style="background-color: #3A3A3A; width:100%; height: 60px; color:#fff; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">  </textarea>
                        </li>
                    </ul>
                </td>
                
                <td style="width:15%;">
                    <ul style="list-style:none; padding: 0px; margin: 0px; " >
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; ">
                            <a style="color:black; font-family:  Arial, Helvetica, sans-serif; text-decoration: none;"
                               onMouseover=" this.style.color='#fff'; this.style.backgroundColor='#23871C'; "
                               onMouseout="  this.style.color='black'; this.style.backgroundColor='#D3D3D3'; "       
                            > 
                                Valor Total:
                            </a>
                        </li> 
                        
                        <li align="center"  style="padding: 0px; margin: 0px; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
                            <textarea id="valor_total_ean" name="data_ean" rows="1" cols="50" readonly style="background-color: #3A3A3A; width:100%; height: 60px; color:#fff; font-family:  Arial, Helvetica, sans-serif; font-size: 130%;">  </textarea>
                        </li>
                    </ul>
                </td>
                
                <td style="">
                </td>
                
            </tr>
        </table>
    </li>

    <li align="center" style="padding: 0px; margin: 0px;">
        
        <img src="../../../../arquivos/imagens/003_login/enviar.png"  
            style="cursor: pointer; padding-top: 1px;"
            
                    onclick="adicionar_produto(
                        document.getElementById ('usuario_logado_id_nome').value,        
                        document.getElementById ('ean_manual').value,
                        document.getElementById ('qtd_ean').value,
                        document.getElementById ('data_ean').value,
                        document.getElementById ('valor_und_ean').value,
                        document.getElementById ('valor_total_ean').value
                    );" alt="" width="135" height="45"
        >
    </li>
    
</ul>    
    
</div>
<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0
-1
-2
- #### LOGIN FIM #### --> 
<!-- 
-0
-1             
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->  

    
    
    
    


<!-- 
-0
-1
-2
- #### JQUERY INÍCIO #### --> 
<!-- 
-0
-1
-2    
-->  
<script type="text/javascript">     
    
    function funcaosomar(){
        
        setTimeout(function(){ 
            
            try{
                
                var nx = 0; nx = document.getElementById('qtd_ean').value;    
                        var n11 = nx.replace(",", ".").trim();
                        
                        var nx2 = 0; nx2 = document.getElementById('valor_und_ean').value;    
                        var n22 = nx2.replace(",", ".").trim();
                                            
                if( $.isNumeric( n11 ) === true ){
                    
                    if( $.isNumeric( n22 ) === true ){

                        var nff = n11 * n22;
                        //var nf = nff.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                        var nf = nff.toFixed(2);
                        var nf2 = nf.replace(".", ",");
                                                                        
                        document.getElementById('qtd_ean').value = n11;
                        document.getElementById('valor_und_ean').value = n22;
                        
                        document.getElementById('valor_total_ean').innerHTML = nf2;
                    }
                    else{
                        
                        document.getElementById('valor_total_ean').innerHTML = "";
                    }
                }
                else{
                    
                    document.getElementById('valor_total_ean').innerHTML = "";
                }
 
                
            }catch(Exception){
                
                document.getElementById('valor_total_ean').innerHTML = "";
            }
        }, 0);
    }
    
    function setando_parametros(){
        
        
//INÍCIO - BAIXANDO TABELA PRODUTOS POR EAN  
    try{
        
    //captura a url da página
    var url = window.location.href; 
    //alert("URL CAPTURADA: \n\n" + url);
    
    //tenta localizar o ?
    var res = url.split('?');
    
    if (res[1] === undefined) {
        //alert('página sem parâmetros.');
    }
    
    if (res[1] !== undefined) {
		//tenta localizar os & (pode haver mais de 1)
        var parametros = res[1].split('&');
        //alert('Parametros encontrados:\n' + parametros);
        
        var ean = "";
            
        for( var cont = 0; cont < parametros.length; cont++ ){
            
            //alert(
            //    'Parametro Encontrado: ' + parametros[cont] + '\n' 
            //);
            
            //var x = document.execCommand('cut');
            //alert(
            //    'Parametro na memória: ' + x + '\n' 
            //);
            
            if( cont === 0 ){

                if( parametros[cont] !== undefined ){
                
                    var dados = parametros[cont].split('=');              
                    var nome_do_parametro = dados[0];
                    var valor_do_parametro = dados[1];
                    
                    document.getElementById("usuario_logado_id_nome").value = valor_do_parametro;    
                }
            }                                                        
            else if( cont === 1 ){

                if( parametros[cont] !== undefined ){
                
                    var dados = parametros[cont].split('=');              
                    var nome_do_parametro = dados[0];
                    var valor_do_parametro = dados[1];
                    
                    document.getElementById("usuario_logado_id").value = valor_do_parametro;    
                }
            }
        }
    }        
    }catch(Exception){}
//FIM - BAIXANDO TABELA PRODUTOS POR EAN           
     }
     
jQuery(document).ready(function(){
        
    setTimeout(function(){ setando_parametros(); }, 0);

});
    
jQuery(window).resize(function() {

    var browser_width2 = jQuery(window).width();

});
</script>
<!-- 
-0
-1
-2
- #### JQUERY FIM #### --> 
<!-- 
-0
-1
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++   
-->






<script>
    
    function abrir_camera_para_ler_o_codigo_de_barras(){
        
        ////////////////////////////////////////////////////////////////////////////
        //var modificador = document.getElementById("divConteudo").innerHTML;
        //setTimeout(function(){ 
            //* 
            //document.getElementById("camera_titulo").innerHTML = 
                //"<table border='0' cellpadding='0' cellspacing='0' style='width:100%;'> <tr><td style='width:30%;'> </td></tr>  <tr> <td align='center' style='width:40%;'> " + "" + "Aguarde! tentando acessar a câmera..." + " </td> </tr> <tr><td style='width:30%;'> </td></tr> </table>" + 
                //"<table border='0' cellpadding='0' cellspacing='0' style='width:100%;'> <tr><td style='width:30%;'> </td></tr>  <tr> <td align='center' style='width:40%;'> <img src='../../../../arquivos/imagens/003_login/javafx-loading-100x100.gif' style='cursor: pointer; 'width='80' height='80'> </td> </tr> <tr><td style='width:30%;'> </td></tr> </table>";
           //*/
        //}, 0);
        ///////////////////////////////////////////////////////////////////////////
                
        Quagga.init({
            
            inputStream: {
                name: "Live",
                type: "LiveStream",
                target: document.querySelector('#camera')    // Or '#yourElement' (optional)
            },
            decoder: {
                readers: ["ean_reader"]
            }
        }, function (err) {
            if (err) {
                console.log(err);
                
                ////////////////////////////////////////////////////////////////////////////
                //var modificador = document.getElementById("divConteudo").innerHTML;
                setTimeout(function(){ 
                    //* 
                    document.getElementById("camera_titulo").innerHTML = 
                        "<table border='0' cellpadding='0' cellspacing='0' style='width:100%;'> <tr><td style='width:30%;'> </td></tr>  <tr> <td align='center' style='width:40%;'> " + "" + "Erro ao tentar acessar a câmera..." + " </td> </tr> <tr><td style='width:30%;'> </td></tr> </table>" + 
                        "<table border='0' cellpadding='0' cellspacing='0' style='width:100%;'> <tr><td style='width:30%;'> </td></tr>  <tr> <td align='center' style='width:40%;'> <img src='../../../../arquivos/imagens/003_login/javafx-loading-100x100.gif' style='cursor: pointer; 'width='80' height='80'> </td> </tr> <tr><td style='width:30%;'> </td></tr> </table>" + 
                        "<table border='0' cellpadding='0' cellspacing='0' style='width:100%;'> <tr><td style='width:30%;'> </td></tr>  <tr> <td align='center' style='width:40%;'> " + "" + "Click em Cancelar e" + " </td> </tr> <tr><td style='width:30%;'> </td></tr> </table>" + 
                        "<table border='0' cellpadding='0' cellspacing='0' style='width:100%;'> <tr><td style='width:30%;'> </td></tr>  <tr> <td align='center' style='width:40%;'> " + "" + "Digite o EAN manualmente" + " </td> </tr> <tr><td style='width:30%;'> </td></tr> </table>";
                    //*/
                }, 0);
                ///////////////////////////////////////////////////////////////////////////
                
                return
            }
            console.log("Initialization finished. Ready to start");
            Quagga.start();
        });

        Quagga.onDetected(function (data) {
            
            setTimeout(function(){ 
                console.log(data.codeResult.code);
                document.querySelector('#ean_manual').innerText = data.codeResult.code;
            
                document.getElementById('controle_camera').style.display = 'none'; 
                document.getElementById('div_consultar_produto').style.display = 'block';
                document.getElementById('camera_titulo').style.display = 'block';
                
                document.getElementById('audio_beep1').play();
            }, 0);
        });
        
    }
    
</script>




    </body>
</html>
